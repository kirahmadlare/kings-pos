<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{subject}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: Arial, Helvetica, sans-serif; background-color: #f4f4f5; -webkit-font-smoothing: antialiased;">
    <table role="presentation" style="width: 100%; border-collapse: collapse; background-color: #f4f4f5;">
        <tr>
            <td style="padding: 40px 20px;">
                <table role="presentation" style="max-width: 600px; width: 100%; margin: 0 auto; background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Hero Banner -->
                    <tr>
                        <td style="padding: 0; border-radius: 8px 8px 0 0; overflow: hidden;">
                            {{#if heroImage}}
                            <img src="{{heroImage}}" alt="{{subject}}" style="display: block; width: 100%; height: auto; max-height: 300px; object-fit: cover; border-radius: 8px 8px 0 0;">
                            {{else}}
                            <div style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); padding: 60px 30px; text-align: center;">
                                <h1 style="margin: 0; color: #ffffff; font-size: 32px; font-weight: bold; line-height: 1.2;">{{subject}}</h1>
                            </div>
                            {{/if}}
                        </td>
                    </tr>

                    <!-- Offer Section -->
                    <tr>
                        <td style="padding: 40px 30px 30px;">
                            <h2 style="margin: 0 0 15px; color: #1f2937; font-size: 24px; font-weight: bold; text-align: center;">{{offerText}}</h2>

                            {{#if offerSubtext}}
                            <p style="margin: 0 0 25px; color: #6b7280; font-size: 16px; line-height: 1.6; text-align: center;">{{offerSubtext}}</p>
                            {{/if}}

                            {{#if offerCode}}
                            <table role="presentation" style="width: 100%; margin: 25px 0;">
                                <tr>
                                    <td style="text-align: center;">
                                        <div style="display: inline-block; padding: 15px 30px; background-color: #fef3c7; border: 2px dashed #f59e0b; border-radius: 8px;">
                                            <p style="margin: 0; color: #92400e; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Promo Code</p>
                                            <p style="margin: 5px 0 0; color: #92400e; font-size: 24px; font-weight: bold; letter-spacing: 2px;">{{offerCode}}</p>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                            {{/if}}
                        </td>
                    </tr>

                    <!-- Featured Products Grid -->
                    {{#if products}}
                    <tr>
                        <td style="padding: 0 30px 30px;">
                            <h3 style="margin: 0 0 20px; color: #1f2937; font-size: 20px; font-weight: 600; text-align: center;">Featured Products</h3>

                            <table role="presentation" style="width: 100%; border-collapse: collapse;">
                                {{#each products}}
                                {{#if @first}}
                                <tr>
                                {{else}}
                                {{#unless (modulo @index 2)}}
                                <tr>
                                {{/unless}}
                                {{/if}}
                                    <td style="width: 50%; padding: 10px; vertical-align: top;">
                                        <table role="presentation" style="width: 100%; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">
                                            <tr>
                                                <td style="padding: 0;">
                                                    {{#if this.image}}
                                                    <img src="{{this.image}}" alt="{{this.name}}" style="display: block; width: 100%; height: 150px; object-fit: cover;">
                                                    {{else}}
                                                    <div style="width: 100%; height: 150px; background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%); display: table;">
                                                        <div style="display: table-cell; text-align: center; vertical-align: middle; color: #8b5cf6; font-size: 14px; font-weight: 600;">{{this.name}}</div>
                                                    </div>
                                                    {{/if}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 15px; background-color: #ffffff;">
                                                    <p style="margin: 0 0 8px; color: #1f2937; font-size: 15px; font-weight: 600; line-height: 1.3;">{{this.name}}</p>
                                                    {{#if this.description}}
                                                    <p style="margin: 0 0 10px; color: #6b7280; font-size: 13px; line-height: 1.4;">{{this.description}}</p>
                                                    {{/if}}
                                                    <table role="presentation" style="width: 100%;">
                                                        <tr>
                                                            <td style="text-align: left;">
                                                                {{#if this.originalPrice}}
                                                                <span style="color: #9ca3af; font-size: 13px; text-decoration: line-through;">${{this.originalPrice}}</span>
                                                                {{/if}}
                                                                <span style="color: #6366f1; font-size: 18px; font-weight: bold; margin-left: 5px;">${{this.price}}</span>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                {{#if (modulo @index 2)}}
                                </tr>
                                {{/if}}
                                {{#if @last}}
                                {{#unless (modulo @index 2)}}
                                    <td style="width: 50%; padding: 10px;"></td>
                                </tr>
                                {{/unless}}
                                {{/if}}
                                {{/each}}
                            </table>
                        </td>
                    </tr>
                    {{/if}}

                    <!-- CTA Buttons -->
                    <tr>
                        <td style="padding: 20px 30px 40px; text-align: center;">
                            <a href="{{ctaLink}}" style="display: inline-block; padding: 16px 48px; background-color: #6366f1; color: #ffffff; text-decoration: none; font-size: 18px; font-weight: 600; border-radius: 8px; box-shadow: 0 4px 6px rgba(99,102,241,0.3);">{{ctaText}}</a>

                            {{#if secondaryCTA}}
                            <div style="margin-top: 15px;">
                                <a href="{{secondaryCTA.link}}" style="display: inline-block; padding: 12px 30px; background-color: transparent; color: #6366f1; text-decoration: none; font-size: 16px; font-weight: 600; border: 2px solid #6366f1; border-radius: 8px;">{{secondaryCTA.text}}</a>
                            </div>
                            {{/if}}

                            {{#if expiryDate}}
                            <p style="margin: 20px 0 0; color: #dc2626; font-size: 14px; font-weight: 600;">Offer expires {{expiryDate}}</p>
                            {{/if}}
                        </td>
                    </tr>

                    <!-- Social Links -->
                    <tr>
                        <td style="padding: 20px 30px; background-color: #f9fafb; border-top: 1px solid #e5e7eb;">
                            <p style="margin: 0 0 15px; color: #6b7280; font-size: 14px; text-align: center; font-weight: 600;">Follow Us</p>
                            <table role="presentation" style="margin: 0 auto;">
                                <tr>
                                    <td style="padding: 0 10px;">
                                        <a href="{{socialLinks.facebook}}" style="display: inline-block; width: 36px; height: 36px; background-color: #3b82f6; border-radius: 50%; text-align: center; line-height: 36px; color: #ffffff; text-decoration: none; font-weight: bold;">f</a>
                                    </td>
                                    <td style="padding: 0 10px;">
                                        <a href="{{socialLinks.instagram}}" style="display: inline-block; width: 36px; height: 36px; background-color: #ec4899; border-radius: 50%; text-align: center; line-height: 36px; color: #ffffff; text-decoration: none; font-weight: bold;">ig</a>
                                    </td>
                                    <td style="padding: 0 10px;">
                                        <a href="{{socialLinks.twitter}}" style="display: inline-block; width: 36px; height: 36px; background-color: #0ea5e9; border-radius: 50%; text-align: center; line-height: 36px; color: #ffffff; text-decoration: none; font-weight: bold;">t</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="background-color: #f9fafb; padding: 20px 30px; text-align: center; border-radius: 0 0 8px 8px;">
                            <p style="margin: 0 0 10px; color: #374151; font-size: 14px; font-weight: 600;">{{storeName}}</p>
                            <p style="margin: 0 0 5px; color: #6b7280; font-size: 13px;">{{storeAddress}}</p>
                            <p style="margin: 0 0 15px; color: #6b7280; font-size: 13px;">{{storePhone}} | {{storeEmail}}</p>
                            <p style="margin: 0; color: #9ca3af; font-size: 11px; line-height: 1.5;">
                                You're receiving this email because you subscribed to our mailing list.<br>
                                <a href="{{unsubscribeLink}}" style="color: #6366f1; text-decoration: underline;">Unsubscribe</a> |
                                <a href="{{preferencesLink}}" style="color: #6366f1; text-decoration: underline;">Update Preferences</a>
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>